!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document.documentElement||document.body,topOffset:100,bottomOffset:200,minimumItemsThreshold:10,measureElementTimeoutMs:1,scrollEndRenderTimeoutMs:0,usePerItemPlaceholder:!1,placeholderContentTemplate:null}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e,n){for(var o=0;o<d.length;o++)if(d[o].parent===e)return d[o];if(n){var r={parent:e,elements:[],totalHeight:0};if(d.push(r),!t.usePerItemPlaceholder){var l=document.createElement("div");l.setAttribute("style","height:0px;margin:0px;overflow:hidden;"),l.innerHTML=t.placeholderContentTemplate,e.insertBefore(l,e.childNodes[0]),r.placeholder=l}return r}}function o(e){for(var n=!1,o=0;o<d.length;o++){var r=d[o];if(r.length<t.minimumItemsThreshold)for(var l=0;l<r.elements.length;l++)r.elements[l].isInDom||r.elements[l].addToDom();else n=!0}return n&&g!==e}function r(e,t){for(var n=[],o=0;o<d.length;o++){for(var r=d[o],l=!1,i=0,a=[],m=0;m<r.elements.length;m++){var s=r.elements[m],u=s.topOffset+s.innerHeight>e&&s.topOffset<t;l=l||u,l||u||(i+=s.height),s.isInDom!==u&&a.push(s)}n.push({parent:r.parent,totalHeight:r.totalHeight,totalTopOffset:i,toggleElements:a,placeholder:r.placeholder})}return n}function l(e){for(var n=0;n<e.length;n++){for(var o=e[n],r=0;r<o.toggleElements.length;r++){var l=o.toggleElements[r];l[l.isInDom?"removeFromDom":"addToDom"]()}t.usePerItemPlaceholder||o.placeholder.setAttribute("style","height:"+o.totalTopOffset+"px;margin:0px;overflow:hidden;")}}function i(){a();var n=t.scrollRoot.scrollTop;if(o(n)){var i=n-t.topOffset,m=n+e.innerHeight+t.bottomOffset,s=r(i,m);l(s),g=n}}function a(){p&&(e.clearTimeout(p),p=null)}function m(t){p||(p=e.setTimeout(i,t))}function s(e){a(),m(e)}function u(){var e=t.scrollEndRenderTimeoutMs;e?s(e):i()}function f(e){t.scrollRoot[e?"addEventListener":"removeEventListener"]("scroll",u),t.scrollRoot[e?"addEventListener":"removeEventListener"]("touchmove",u)}function h(e){var o=!d.length,r=n(e.parentElement,!0);t.usePerItemPlaceholder||(e.topOffset+=r.totalHeight,r.totalHeight+=e.height,e.parentElement.setAttribute("style","height:"+r.totalHeight+"px;")),r.elements.push(e),o&&f(!0),g=null,m(1)}function c(e){var t=n(e.parentElement,!1);if(t){var o=t.elements.indexOf(e);if(o>-1&&t.elements.splice(o,1),0===t.elements.length){var r=d.indexOf(t);d.splice(r,1)}}d.length||f(!1)}var d=[],g=null,p=null;return e.addEventListener("resize",function(){g=null,i()}),{registerElement:h,unregisterElement:c}}]).directive("offscreenPlaceholder",["$animate","offscreenPlaceholderCoordinator","offscreenPlaceholderConfiguration",function(t,n,o){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,l,i,a,m){var s,u,f,h={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null,parentElement:null};if(i.offscreenPlaceholder){var c=i.offscreenPlaceholder.split(",");h.innerHeight=parseFloat(c[0],10);var d=c.length>1?parseFloat(c[1],10):0;h.height=h.innerHeight+d,h.parentElement=l.parent()[0]}h.addToDom=function(){s||m(r.$new(),function(e,n){s=n,t.enter(e,h.parentElement,l)}),f=l[0].nextSibling,h.innerHeight&&l[0].nextSibling.setAttribute("style","height:"+h.innerHeight+"px"),u&&u.parentNode.removeChild(u),h.isInDom=!0},h.removeFromDom=function(){o.usePerItemPlaceholder&&(u=document.createElement("div"),u.setAttribute("style","height:"+h.height+"px;margin:0px;overflow:hidden;"),u.innerHTML=o.placeholderContentTemplate,l[0].parentNode.insertBefore(u,l[0].nextSibling)),f&&(f.parentNode.removeChild(f),s&&(s.$destroy(),s=null),f=null),h.isInDom=!1};var g=function(){var t=l[0].nextSibling;if(!h.height){var n=t.offsetHeight,o=document.all?parseInt(t.currentStyle.marginTop,10)+parseInt(t.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-bottom"));h.innerHeight=n,h.height=n+o}var r=document.documentElement,i=(t.getBoundingClientRect,t.parentElement.getBoundingClientRect());h.topOffset=i.top+e.pageYOffset-r.clientTop},p=function(){g(),n.registerElement(h)};h[h.height?"removeFromDom":"addToDom"](),setTimeout(p,o.measureElementTimeoutMs),r.$on("$destroy",function(){n.unregisterElement(h)})}}}])}(window,window.angular);
