!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document.documentElement||document.body,topOffset:100,bottomOffset:200,minimumItemsTreshold:10,measureElementTimeoutMs:1,scrollEndRenderTimeoutMs:0}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e){if(d.length<t.minimumItemsTreshold){for(var n=0;n<d.length;n++)d[n].isInDom||d[n].addToDom();return!1}return g===e?!1:!0}function o(e,t){for(var n=[],o=0;o<d.length;o++){var r=d[o],i=r.topOffset+r.innerHeight>e&&r.topOffset<t;r.isInDom!=i&&n.push(r)}return n}function r(e){for(var t=0;t<e.length;t++){var n=e[t];n[n.isInDom?"removeFromDom":"addToDom"]()}}function i(){l();var i=t.scrollRoot.scrollTop;if(n(i)){var u=i-t.topOffset,m=i+e.innerHeight+t.bottomOffset,s=o(u,m);r(s),g=i}}function l(){h&&(e.clearTimeout(h),h=null)}function u(t){h||(h=e.setTimeout(i,t))}function m(e){l(),u(e)}function s(){var e=t.scrollEndRenderTimeoutMs;e?m(e):i()}function f(e){t.scrollRoot[e?"addEventListener":"removeEventListener"]("scroll",s),t.scrollRoot[e?"addEventListener":"removeEventListener"]("touchmove",s)}function a(e){d.push(e),1===d.length&&f(!0),g=null,u(1)}function c(e){var t=d.indexOf(e);t>-1&&d.splice(t,1),0===d.length&&f(!1)}var d=[],g=null,h=null;return e.addEventListener("resize",function(){g=null,i()}),{registerElement:a,unregisterElement:c}}]).directive("offscreenPlaceholder",["$animate","offscreenPlaceholderCoordinator","offscreenPlaceholderConfiguration",function(t,n,o){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,i,l,u,m){var s,f,a,c={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null};if(l.offscreenPlaceholder){var d=l.offscreenPlaceholder.split(",");c.innerHeight=parseFloat(d[0],10);var g=d.length>1?parseFloat(d[1],10):0;c.height=c.innerHeight+g}c.addToDom=function(){s||m(r.$new(),function(e,n){s=n,t.enter(e,i.parent(),i)}),a=i[0].nextSibling,c.innerHeight&&i[0].nextSibling.setAttribute("style","height:"+c.innerHeight+"px"),f&&f.parentNode.removeChild(f),c.isInDom=!0},c.removeFromDom=function(){f=document.createElement("div"),f.setAttribute("style","height:"+c.height+"px;margin:0px;"),i[0].parentNode.insertBefore(f,i[0].nextSibling),a&&(a.parentNode.removeChild(a),s&&(s.$destroy(),s=null),a=null),c.isInDom=!1};var h=function(){var t=i[0].nextSibling;if(!c.height){var n=t.offsetHeight,o=document.all?parseInt(t.currentStyle.marginTop,10)+parseInt(t.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-bottom"));c.innerHeight=n,c.height=n+o}var r=document.documentElement,l=t.getBoundingClientRect(),u=l.top+e.pageYOffset-r.clientTop;c.topOffset=u},p=function(){h(),n.registerElement(c)};c[c.height?"removeFromDom":"addToDom"](),setTimeout(p,o.measureElementTimeoutMs),r.$on("$destroy",function(){n.unregisterElement(c)})}}}])}(window,window.angular);
