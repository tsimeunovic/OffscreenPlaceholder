!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document,topOffset:100,bottomOffset:200,minimumItemsThreshold:10}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e,t){for(var n=0;n<c.length;n++)if(c[n].parent===e)return c[n];if(t){var o=e.getBoundingClientRect?e.parentElement.getBoundingClientRect():e.parentElement.getBoundingClientRect(),r=o.top+d.scrollTop-document.documentElement.clientTop,l={parent:e,topOffset:r,elements:[],totalHeight:0};return c.push(l),l}}function o(e){for(var n=!1,o=0;o<c.length;o++){var r=c[o];if(r.length<t.minimumItemsThreshold)for(var l=0;l<r.elements.length;l++)r.elements[l].isInDom||r.elements[l].addToDom();else n=!0}return n&&g!==e}function r(e,t){for(var n=[],o=0;o<c.length;o++){for(var r=c[o],l=!1,i=0,s=[],a=0;a<r.elements.length;a++){var m=r.elements[a],f=m.topOffset+m.innerHeight>e&&m.topOffset<t;l=l||f,l||f||(i+=m.height),m.isInDom!==f&&s.push(m)}n.push({parent:r.parent,totalHeight:r.totalHeight,totalTopOffset:i,toggleElements:s})}return n}function l(e){for(var t=0;t<e.length;t++)for(var n=e[t],o=0;o<n.toggleElements.length;o++){var r=n.toggleElements[o];r[r.isInDom?"removeFromDom":"addToDom"]()}}function i(){a();var n=d.scrollTop;if(o(n)){var i=n-t.topOffset,s=n+e.innerHeight+t.bottomOffset,m=r(i,s),f=++h;v(function(){f===h&&l(m)}),g=n}}function s(){g=null,p||(p=e.setTimeout(i,1))}function a(){p&&(e.clearTimeout(p),p=null)}function m(n){t.scrollRoot[n?"addEventListener":"removeEventListener"]("scroll",i),t.scrollRoot[n?"addEventListener":"removeEventListener"]("touchmove",i),e[n?"addEventListener":"removeEventListener"]("resize",s)}function f(e){if(!c.length){m(!0);var o=t.scrollRoot;d=o.scrollingElement||o.documentElement||o}var r=n(e.parentElement,!0);e.topOffset=r.topOffset+r.totalHeight,r.totalHeight+=e.height,e.parentElement.setAttribute("style","height:"+r.totalHeight+"px;position:relative;transform:translatez(0);"),r.elements.push(e),e.elementGroup=r,s()}function u(e){var t=e.elementGroup,n=t.elements.indexOf(e);if(n>-1&&t.elements.splice(n,1),e.elementGroup=null,0===t.elements.length){var o=c.indexOf(t);c.splice(o,1)}c.length||m(!1)}var c=[],h=0,g=null,p=null,d=null,v=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}();return{registerElement:f,unregisterElement:u}}]).directive("offscreenPlaceholder",["$animate","$parse","offscreenPlaceholderCoordinator",function(e,t,n){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(o,r,l,i,s){var a,m,f={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null,parentElement:null,elementGroup:null};f.addToDom=function(){a||s(o.$new(),function(t,n){a=n,e.enter(t,f.parentElement,r)}),m=r[0].nextSibling;var t=f.topOffset-f.elementGroup.topOffset;m.setAttribute("style","height:"+f.innerHeight+"px;position:absolute;top:"+t+"px;transform:translatez(0);"),f.isInDom=!0},f.removeFromDom=function(){m&&(m.parentNode.removeChild(m),a&&(a.$destroy(),a=null),m=null),f.isInDom=!1},function(){var e=l.offscreenPlaceholder.match(/^[\d,\s]+$/g)?l.offscreenPlaceholder:t(l.offscreenPlaceholder)(o).toString(),i=e.split(",");f.innerHeight=parseFloat(i[0],10);var s=i.length>1?parseFloat(i[1],10):0;f.height=f.innerHeight+s,f.parentElement=r.parent()[0],n.registerElement(f),o.$on("$destroy",function(){n.unregisterElement(f)})}()}}}])}(window,window.angular);