!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document.documentElement||document.body,topOffset:100,bottomOffset:200,minimumItemsTreshold:10,measureElementTimeoutMs:1}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e){if(a.length<t.minimumItemsTreshold){for(var n=0;n<a.length;n++)a[n].isInDom||a[n].addToDom();return!1}return f===e?!1:!0}function o(e,t){for(var n=[],o=0;o<a.length;o++){var r=a[o],i=r.topOffset+r.innerHeight>e&&r.topOffset<t;r.isInDom!=i&&n.push(r)}return n}function r(e){for(var t=0;t<e.length;t++){var n=e[t];n[n.isInDom?"removeFromDom":"addToDom"]()}}function i(e){t.scrollRoot[e?"addEventListener":"removeEventListener"]("scroll",l),t.scrollRoot[e?"addEventListener":"removeEventListener"]("touchmove",l)}function l(){c&&(e.clearTimeout(c),c=null);var i=t.scrollRoot.scrollTop;if(n(i)){var l=i-t.topOffset,u=i+e.innerHeight+t.bottomOffset,m=o(l,u);r(m),f=i}}function u(){c||(c=e.setTimeout(l,1))}function m(e){a.push(e),1===a.length&&i(!0),f=null,u()}function s(e){var t=a.indexOf(e);t>-1&&a.splice(t,1),0===a.length&&i(!1)}var a=[],f=null,c=null;return e.addEventListener("resize",function(){f=null,l()}),{registerElement:m,unregisterElement:s}}]).directive("offscreenPlaceholder",["$animate","offscreenPlaceholderCoordinator","offscreenPlaceholderConfiguration",function(t,n,o){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,i,l,u,m){var s,a,f,c={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null};if(l.offscreenPlaceholder){var d=l.offscreenPlaceholder.split(",");c.innerHeight=parseFloat(d[0],10);var g=d.length>1?parseFloat(d[1],10):0;c.height=c.innerHeight+g}c.addToDom=function(){s||m(r.$new(),function(e,n){s=n,t.enter(e,i.parent(),i)}),f=i[0].nextSibling,c.innerHeight&&i[0].nextSibling.setAttribute("style","height:"+c.innerHeight+"px"),a&&a.parentNode.removeChild(a),c.isInDom=!0},c.removeFromDom=function(){a=document.createElement("div"),a.setAttribute("style","height:"+c.height+"px;margin:0px;"),i[0].parentNode.insertBefore(a,i[0].nextSibling),f&&(f.parentNode.removeChild(f),s&&(s.$destroy(),s=null),f=null),c.isInDom=!1};var h=function(){var t=i[0].nextSibling;if(!c.height){var n=t.offsetHeight,o=document.all?parseInt(t.currentStyle.marginTop,10)+parseInt(t.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-bottom"));c.innerHeight=n,c.height=n+o}var r=document.documentElement,l=t.getBoundingClientRect(),u=l.top+e.pageYOffset-r.clientTop;c.topOffset=u},p=function(){h(),n.registerElement(c)};c[c.height?"removeFromDom":"addToDom"](),setTimeout(p,o.measureElementTimeoutMs),r.$on("$destroy",function(){n.unregisterElement(c)})}}}])}(window,window.angular);
