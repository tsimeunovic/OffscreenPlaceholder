!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document,topOffset:100,bottomOffset:200,minimumItemsThreshold:10,measureElementTimeoutMs:1,scrollEndRenderTimeoutMs:0,usePerItemPlaceholder:!1,placeholderContentTemplate:null}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e,n){for(var o=0;o<d.length;o++)if(d[o].parent===e)return d[o];if(n){var r={parent:e,elements:[],totalHeight:0};if(d.push(r),!t.usePerItemPlaceholder){var l=document.createElement("div");l.setAttribute("style","height:0px;margin:0px;overflow:hidden;"),l.innerHTML=t.placeholderContentTemplate,e.insertBefore(l,e.childNodes[0]),r.placeholder=l}return r}}function o(e){for(var n=!1,o=0;o<d.length;o++){var r=d[o];if(r.length<t.minimumItemsThreshold)for(var l=0;l<r.elements.length;l++)r.elements[l].isInDom||r.elements[l].addToDom();else n=!0}return n&&g!==e}function r(e,t){for(var n=[],o=0;o<d.length;o++){for(var r=d[o],l=!1,i=0,a=[],s=0;s<r.elements.length;s++){var m=r.elements[s],f=m.topOffset+m.innerHeight>e&&m.topOffset<t;l=l||f,l||f||(i+=m.height),m.isInDom!==f&&a.push(m)}n.push({parent:r.parent,totalHeight:r.totalHeight,totalTopOffset:i,toggleElements:a,placeholder:r.placeholder})}return n}function l(e){for(var n=0;n<e.length;n++){for(var o=e[n],r=0;r<o.toggleElements.length;r++){var l=o.toggleElements[r];l[l.isInDom?"removeFromDom":"addToDom"]()}t.usePerItemPlaceholder||o.placeholder.setAttribute("style","height:"+o.totalTopOffset+"px;margin:0px;overflow:hidden;")}}function i(){a();var n=t.scrollRoot,i=n.scrollingElement||n.documentElement||n,s=i.scrollTop;if(o(s)){var m=s-t.topOffset,f=s+e.innerHeight+t.bottomOffset,u=r(m,f),c=++v;requestAnimationFrame(function(){c===v&&l(u)}),g=s}}function a(){p&&(e.clearTimeout(p),p=null)}function s(t){p||(p=e.setTimeout(i,t))}function m(e){a(),s(e)}function f(){var e=t.scrollEndRenderTimeoutMs;e?m(e):i()}function u(e){t.scrollRoot[e?"addEventListener":"removeEventListener"]("scroll",f),t.scrollRoot[e?"addEventListener":"removeEventListener"]("touchmove",f)}function c(e){var o=!d.length,r=n(e.parentElement,!0);t.usePerItemPlaceholder||(e.topOffset+=r.totalHeight,r.totalHeight+=e.height,e.parentElement.setAttribute("style","height:"+r.totalHeight+"px;")),r.elements.push(e),o&&u(!0),g=null,s(1)}function h(e){var t=n(e.parentElement,!1);if(t){var o=t.elements.indexOf(e);if(o>-1&&t.elements.splice(o,1),0===t.elements.length){var r=d.indexOf(t);d.splice(r,1)}}d.length||u(!1)}var d=[],g=null,p=null,v=0;return e.addEventListener("resize",function(){g=null,i()}),{registerElement:c,unregisterElement:h}}]).directive("offscreenPlaceholder",["$animate","$parse","offscreenPlaceholderCoordinator","offscreenPlaceholderConfiguration",function(t,n,o,r){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(l,i,a,s,m){var f,u,c,h={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null,parentElement:null};if(a.offscreenPlaceholder){var d=a.offscreenPlaceholder.match(/^[\d,\s]+$/g)?a.offscreenPlaceholder:n(a.offscreenPlaceholder)(l).toString(),g=d.split(",");h.innerHeight=parseFloat(g[0],10);var p=g.length>1?parseFloat(g[1],10):0;h.height=h.innerHeight+p,h.parentElement=i.parent()[0]}h.addToDom=function(){if(f||m(l.$new(),function(e,n){f=n,t.enter(e,h.parentElement,i)}),c=i[0].nextSibling,h.innerHeight){var e="height:"+h.innerHeight+"px;position:absolute:top:"+h.innerHeight+"px;transform:translatez(0);";c.setAttribute("style",e)}u&&u.parentNode.removeChild(u),h.isInDom=!0},h.removeFromDom=function(){r.usePerItemPlaceholder&&(u=document.createElement("div"),u.setAttribute("style","height:"+h.height+"px;margin:0px;overflow:hidden;"),u.innerHTML=r.placeholderContentTemplate,i[0].parentNode.insertBefore(u,i[0].nextSibling)),c&&(c.parentNode.removeChild(c),f&&(f.$destroy(),f=null),c=null),h.isInDom=!1};var v=function(){var t=i[0].nextSibling;if(!h.height){var n=t.offsetHeight,o=document.all?parseInt(t.currentStyle.marginTop,10)+parseInt(t.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(t,"").getPropertyValue("margin-bottom"));h.innerHeight=n,h.height=n+o}var r=document.documentElement,l=(t.getBoundingClientRect,t.parentElement.getBoundingClientRect());h.topOffset=l.top+e.pageYOffset-r.clientTop},E=function(){v(),o.registerElement(h)};h[h.height?"removeFromDom":"addToDom"](),setTimeout(E,r.measureElementTimeoutMs),l.$on("$destroy",function(){o.unregisterElement(h)})}}}])}(window,window.angular);
