(function(r,v){v.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document,topOffset:100,bottomOffset:200,minimumItemsThreshold:10,measureElementTimeoutMs:1,scrollEndRenderTimeoutMs:0,usePerItemPlaceholder:!1,placeholderContentTemplate:null}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(h){function p(a,d){for(var b=0;b<f.length;b++)if(f[b].parent===a)return f[b];if(d){b={parent:a,elements:[],totalHeight:0};f.push(b);
if(!h.usePerItemPlaceholder){var e=document.createElement("div");e.setAttribute("style","height:0px;margin:0px;overflow:hidden;");e.innerHTML=h.placeholderContentTemplate;a.insertBefore(e,a.childNodes[0]);b.placeholder=e}return b}}function k(){l&&(r.clearTimeout(l),l=null);for(var a=h.scrollRoot,a=(a.scrollingElement||a.documentElement||a).scrollTop,d=!1,b=0;b<f.length;b++){var e=f[b];if(e.length<h.minimumItemsThreshold)for(var c=0;c<e.elements.length;c++)e.elements[c].isInDom||e.elements[c].addToDom();
else d=!0}if(d&&g!==a){b=a-h.topOffset;e=a+r.innerHeight+h.bottomOffset;d=[];for(c=0;c<f.length;c++){for(var q=f[c],u=!1,k=0,n=[],m=0;m<q.elements.length;m++){var t=q.elements[m],p=t.topOffset+t.innerHeight>b&&t.topOffset<e;(u=u||p)||p||(k+=t.height);t.isInDom!==p&&n.push(t)}d.push({parent:q.parent,totalHeight:q.totalHeight,totalTopOffset:k,toggleElements:n,placeholder:q.placeholder})}for(b=0;b<d.length;b++){e=d[b];for(c=0;c<e.toggleElements.length;c++)q=e.toggleElements[c],q[q.isInDom?"removeFromDom":
"addToDom"]();h.usePerItemPlaceholder||e.placeholder.setAttribute("style","height:"+e.totalTopOffset+"px;margin:0px;overflow:hidden;")}g=a}}function n(){var a=h.scrollEndRenderTimeoutMs;a?(l&&(r.clearTimeout(l),l=null),l||(l=r.setTimeout(k,a))):k()}function m(a){h.scrollRoot[a?"addEventListener":"removeEventListener"]("scroll",n);h.scrollRoot[a?"addEventListener":"removeEventListener"]("touchmove",n)}var f=[],g=null,l=null;r.addEventListener("resize",function(){g=null;k()});return{registerElement:function(a){var d=
!f.length,b=p(a.parentElement,!0);h.usePerItemPlaceholder||(a.topOffset+=b.totalHeight,b.totalHeight+=a.height,a.parentElement.setAttribute("style","height:"+b.totalHeight+"px;"));b.elements.push(a);d&&m(!0);g=null;l||(l=r.setTimeout(k,1))},unregisterElement:function(a){var d=p(a.parentElement,!1);d&&(a=d.elements.indexOf(a),-1<a&&d.elements.splice(a,1),0===d.elements.length&&(d=f.indexOf(d),f.splice(d,1)));f.length||m(!1)}}}]).directive("offscreenPlaceholder",["$animate","$parse","offscreenPlaceholderCoordinator",
"offscreenPlaceholderConfiguration",function(h,p,k,n){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(m,f,g,l,a){var d,b,e,c={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null,parentElement:null};g.offscreenPlaceholder&&(g=(g.offscreenPlaceholder.match(/^[\d,\s]+$/g)?g.offscreenPlaceholder:p(g.offscreenPlaceholder)(m).toString()).split(","),c.innerHeight=parseFloat(g[0],10),g=1<g.length?parseFloat(g[1],
10):0,c.height=c.innerHeight+g,c.parentElement=f.parent()[0]);c.addToDom=function(){d||a(m.$new(),function(a,b){d=b;h.enter(a,c.parentElement,f)});e=f[0].nextSibling;c.innerHeight&&f[0].nextSibling.setAttribute("style","height:"+c.innerHeight+"px");b&&b.parentNode.removeChild(b);c.isInDom=!0};c.removeFromDom=function(){n.usePerItemPlaceholder&&(b=document.createElement("div"),b.setAttribute("style","height:"+c.height+"px;margin:0px;overflow:hidden;"),b.innerHTML=n.placeholderContentTemplate,f[0].parentNode.insertBefore(b,
f[0].nextSibling));e&&(e.parentNode.removeChild(e),d&&(d.$destroy(),d=null),e=null);c.isInDom=!1};c[c.height?"removeFromDom":"addToDom"]();setTimeout(function(){var a=f[0].nextSibling;if(!c.height){var b=a.offsetHeight,d=document.all?parseInt(a.currentStyle.marginTop,10)+parseInt(a.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(a,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(a,"").getPropertyValue("margin-bottom"));c.innerHeight=b;
c.height=b+d}b=document.documentElement;a=a.parentElement.getBoundingClientRect();c.topOffset=a.top+r.pageYOffset-b.clientTop;k.registerElement(c)},n.measureElementTimeoutMs);m.$on("$destroy",function(){k.unregisterElement(c)})}}}])})(window,window.angular);
