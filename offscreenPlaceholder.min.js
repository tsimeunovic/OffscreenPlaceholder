!function(e,t){"use strict";t.module("offscreen-placeholder",[]).value("offscreenPlaceholderConfiguration",{scrollRoot:document,topOffset:100,bottomOffset:200,minimumItemsThreshold:10,measureElementTimeoutMs:1,scrollEndRenderTimeoutMs:0,usePerItemPlaceholder:!1,placeholderContentTemplate:null}).service("offscreenPlaceholderCoordinator",["offscreenPlaceholderConfiguration",function(t){function n(e,t){for(var n=0;n<d.length;n++)if(d[n].parent===e)return d[n];if(t){var o={parent:e,topOffset:c(e),elements:[],totalHeight:0};return d.push(o),o}}function o(e){for(var n=!1,o=0;o<d.length;o++){var r=d[o];if(r.length<t.minimumItemsThreshold)for(var l=0;l<r.elements.length;l++)r.elements[l].isInDom||r.elements[l].addToDom();else n=!0}return n&&p!==e}function r(e,t){for(var n=[],o=0;o<d.length;o++){for(var r=d[o],l=!1,i=0,a=[],s=0;s<r.elements.length;s++){var m=r.elements[s],f=m.topOffset+m.innerHeight>e&&m.topOffset<t;l=l||f,l||f||(i+=m.height),m.isInDom!==f&&a.push(m)}n.push({parent:r.parent,totalHeight:r.totalHeight,totalTopOffset:i,toggleElements:a})}return n}function l(e){for(var t=0;t<e.length;t++)for(var n=e[t],o=0;o<n.toggleElements.length;o++){var r=n.toggleElements[o];r[r.isInDom?"removeFromDom":"addToDom"]()}}function i(){a();var n=t.scrollRoot,i=n.scrollingElement||n.documentElement||n,s=i.scrollTop;if(o(s)){var m=s-t.topOffset,f=s+e.innerHeight+t.bottomOffset,u=r(m,f),c=++E;requestAnimationFrame(function(){c===E&&l(u)}),p=s}}function a(){v&&(e.clearTimeout(v),v=null)}function s(t){v||(v=e.setTimeout(i,t))}function m(e){a(),s(e)}function f(){var e=t.scrollEndRenderTimeoutMs;e?m(e):i()}function u(e){t.scrollRoot[e?"addEventListener":"removeEventListener"]("scroll",f),t.scrollRoot[e?"addEventListener":"removeEventListener"]("touchmove",f)}function c(t){var n=(t.getBoundingClientRect,t.parentElement.getBoundingClientRect());return n.top+e.pageYOffset-document.documentElement.clientTop}function h(e){var o=!d.length,r=n(e.parentElement,!0);t.usePerItemPlaceholder||(e.topOffset+=r.totalHeight,r.totalHeight+=e.height,e.parentElement.setAttribute("style","height:"+r.totalHeight+"px;position:relative;transform:translatez(0);")),r.elements.push(e),e.elementGroup=r,o&&u(!0),p=null,s(1)}function g(e){var t=e.elementGroup;if(t){e.elementGroup=null;var n=t.elements.indexOf(e);if(n>-1&&t.elements.splice(n,1),0===t.elements.length){var o=d.indexOf(t);d.splice(o,1)}}d.length||u(!1)}var d=[],p=null,v=null,E=0;return e.addEventListener("resize",function(){p=null,i()}),{registerElement:h,unregisterElement:g,getElementTopOffset:c}}]).directive("offscreenPlaceholder",["$animate","$parse","offscreenPlaceholderCoordinator","offscreenPlaceholderConfiguration",function(e,t,n,o){return{multiElement:!0,transclude:"element",priority:500,terminal:!0,restrict:"A",$$tlb:!0,link:function(r,l,i,a,s){var m,f,u,c={addToDom:null,removeFromDom:null,isInDom:!1,innerHeight:null,height:null,topOffset:null,parentElement:null,elementGroup:null};if(i.offscreenPlaceholder){var h=i.offscreenPlaceholder.match(/^[\d,\s]+$/g)?i.offscreenPlaceholder:t(i.offscreenPlaceholder)(r).toString(),g=h.split(",");c.innerHeight=parseFloat(g[0],10);var d=g.length>1?parseFloat(g[1],10):0;c.height=c.innerHeight+d,c.parentElement=l.parent()[0]}c.addToDom=function(){if(m||s(r.$new(),function(t,n){m=n,e.enter(t,c.parentElement,l)}),u=l[0].nextSibling,c.innerHeight){var t=c.topOffset-c.elementGroup.topOffset;u.setAttribute("style","height:"+c.innerHeight+"px;transform:translatez(0);position:absolute;top:"+t+"px;")}f&&f.parentNode.removeChild(f),c.isInDom=!0},c.removeFromDom=function(){o.usePerItemPlaceholder&&(f=document.createElement("div"),f.setAttribute("style","height:"+c.height+"px;margin:0px;overflow:hidden;"),f.innerHTML=o.placeholderContentTemplate,l[0].parentNode.insertBefore(f,l[0].nextSibling)),u&&(u.parentNode.removeChild(u),m&&(m.$destroy(),m=null),u=null),c.isInDom=!1};var p=function(){var e=l[0].nextSibling;if(!c.height){var t=e.offsetHeight,o=document.all?parseInt(e.currentStyle.marginTop,10)+parseInt(e.currentStyle.marginBottom,10):parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-top"))+parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("margin-bottom"));c.innerHeight=t,c.height=t+o}c.topOffset=n.getElementTopOffset(e)},v=function(){p(),n.registerElement(c)};c[c.height?"removeFromDom":"addToDom"](),setTimeout(v,o.measureElementTimeoutMs),r.$on("$destroy",function(){n.unregisterElement(c)})}}}])}(window,window.angular);
